# CSV 格式支持说明

`program.py` 现在支持三种CSV格式的自动检测和加载：

## 格式1: 二进制向量 (Binary Vector)

```csv
1,1,1,0,1,0,1,0,1,0
0,1,0,0,1,1,1,0,0,1
0,0,1,1,1,1,1,1,1,1
```

**用途**: 直接表示特征组合模式
**示例文件**: `prevalent patterns.csv`

## 格式2: 文本+浮点数 (Text + Float) ⭐新增

```csv
Restaurants,39.978658,116.307898
Cinema,39.979228,116.305721
Hospital,39.976179,116.307838
```

**格式**: `特征类型,纬度,经度`
**用途**: POI地理位置数据
**示例文件**: `Beijing_haidian.csv`, `test_text_float.csv`

**自动转换**:
- 系统会自动提取所有唯一特征类型
- 根据距离阈值(默认0.01度≈1km)计算共现关系
- 生成二进制向量模式用于后续处理

## 格式3: 混合格式 (Mixed)

```csv
Pattern1,1,0,1,0.85,High
Pattern2,0,1,0,0.23,Low
```

**用途**: 包含元数据的模式数据
**自动解析**: 智能识别整数、浮点数和文本

## 使用方法

1. 点击 "Open CSV File" 按钮
2. 选择任意格式的CSV文件
3. 系统自动检测格式并转换
4. 显示加载信息和格式类型

## 技术细节

### 格式检测逻辑

```python
- 如果第一列是数字且所有值都是0/1 → binary_vector
- 如果第一列是文本且第二列是浮点数 → text_float  
- 其他情况 → mixed
```

### 文本+浮点数转换过程

1. **提取特征类型**: 从第一列获取所有唯一值
2. **计算共现**: 对每个位置，找出距离阈值内的其他特征
3. **生成向量**: 将共现关系转换为二进制向量
4. **去重**: 移除重复的模式
5. **显示**: 弹出对话框显示转换信息

### 示例转换

输入 (text_float):
```
Restaurant,39.97,116.30
Hospital,39.97,116.31
Cinema,39.98,116.30
```

转换为 (binary_vector):
```
特征: [Cinema, Hospital, Restaurant]
模式: [1, 1, 1]  # Restaurant附近有Hospital和Cinema
      [1, 1, 0]  # Hospital附近有Restaurant
      [1, 0, 1]  # Cinema附近有Restaurant
```

## 参数调整

可以在 `process_text_float_format()` 方法中调整:

```python
distance_threshold = 0.01  # 距离阈值(度)
```

- 增大: 更多特征被认为共现，生成复杂模式
- 减小: 更严格的共现条件，生成简单模式

## 兼容性

✅ 向后兼容: 原有的二进制向量文件仍然正常工作
✅ 自动检测: 无需手动指定格式
✅ 错误处理: 格式错误时显示友好提示


